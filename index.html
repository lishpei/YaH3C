<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Yah3c by lishpei</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Yah3c</h1>
      <h2 class="project-tagline">Python 实现的中山大学东校区校园网认证客户端</h2>
      <a href="https://github.com/lishpei/YaH3C" class="btn">View on GitHub</a>
      <a href="https://github.com/lishpei/YaH3C/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/lishpei/YaH3C/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="yah3c" class="anchor" href="#yah3c" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>YaH3C</h1>

<p>YaH3C 是用于校园网认证的客户端，支持中山大学东校区.</p>

<h2>
<a id="依赖" class="anchor" href="#%E4%BE%9D%E8%B5%96" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>依赖</h2>

<ul>
<li>Linux</li>
<li>Python2 (Python3暂不支持)</li>
</ul>

<h2>
<a id="安装" class="anchor" href="#%E5%AE%89%E8%A3%85" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>安装</h2>

<p>首先从github上下载，可以直接利用<code>git clone</code>，也可以下载压缩包自己解压然后安装。下面以git为例，如果没有则需要先安装：</p>

<div class="highlight highlight-source-shell"><pre><span class="pl-c"># Ubuntu/Debian</span>
sudo apt-get install git

<span class="pl-c"># ArchLinux</span>
sudo pacman -S git</pre></div>

<p>然后从项目中clone下来并安装</p>

<div class="highlight highlight-source-shell"><pre>git clone git://github.com/humiaozuzu/YaH3C.git
<span class="pl-c1">cd</span> YaH3C
make
sudo make install</pre></div>

<p><strong>ArchLinux</strong>默认安装的python是python3，你需要手动安装python2。</p>

<h2>
<a id="使用" class="anchor" href="#%E4%BD%BF%E7%94%A8" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>使用</h2>

<h3>
<a id="认证" class="anchor" href="#%E8%AE%A4%E8%AF%81" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>认证</h3>

<p>程序运行时必须要有root权限：</p>

<div class="highlight highlight-source-shell"><pre>sudo yah3c</pre></div>

<p>然后根据程序的提示输入账号密码就可以开始认证了。</p>

<h3>
<a id="联网" class="anchor" href="#%E8%81%94%E7%BD%91" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>联网</h3>

<p>因为YaH3C仅仅是<strong>认证</strong>客户端，所以通过认证后你需要自己联网，一般学校都是使用的dhcp协议获取ip。</p>

<p>你可以通过你自己喜欢的方式获取ip，命令行的或者是NetworkManager/Wicd：</p>

<div class="highlight highlight-source-shell"><pre><span class="pl-c"># 以dhcpcd为例</span>
sudo dhcpcd eth0</pre></div>

<h2>
<a id="配置文件" class="anchor" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>配置文件</h2>

<p>所有用户的登陆信息和配置文件都放在<code>~/.yah3c/</code>目录下，可以自己根据需求进行修改。</p>

<pre><code>~/yah3c/
├── plugins            # 插件目录
│   ├── auto_dhcp.py
│   ├── __init__.py
│   ├── notify.py
│   ├── plugin_template.py
│   └── test.py
└── users.conf         # 保存用户的登陆信息
</code></pre>

<p>用户的登陆信息按照如下的格式保存在文件<code>users.conf</code>中：</p>

<pre><code>[account]          # 你的帐户 
password = 123456  # 密码
dev = eth0         # 使用的网卡
</code></pre>

<h2>
<a id="插件" class="anchor" href="#%E6%8F%92%E4%BB%B6" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>插件</h2>

<p>目前插件机制还不是很完善，默认是没有启用任何插件的。</p>

<h3>
<a id="pluginsnotify" class="anchor" href="#pluginsnotify" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>plugins::notify</h3>

<p>调用<code>python-notify</code>提示用户在线或掉线。</p>

<p>KDE的用户可能回遇到下面错误或者notify不显示的情况：</p>

<div class="highlight highlight-source-shell"><pre>No protocol specified<span class="pl-cce">\n</span>Autolaunch error: X11 initialization failed.<span class="pl-cce">\n</span></pre></div>

<p>有2种解决方案：</p>

<ol>
<li>在终端执行<code>xhost +local:root</code>，或讲其添加到<code>.bash_profile</code>一劳永逸解决问题。</li>
<li>
<p>执行<code>visudo</code>后添加下面的配置 </p>

<div class="highlight highlight-source-shell"><pre>Defaults env_keep += <span class="pl-s"><span class="pl-pds">"</span>HOME<span class="pl-pds">"</span></span></pre></div>
</li>
</ol>

<h3>
<a id="pluginsauto_dhcp" class="anchor" href="#pluginsauto_dhcp" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>plugins::auto_dhcp</h3>

<p>这个插件会在你登陆成功后使用dhcpcd帮你自动获取ip。</p>

<h3>
<a id="为yah3c贡献插件" class="anchor" href="#%E4%B8%BAyah3c%E8%B4%A1%E7%8C%AE%E6%8F%92%E4%BB%B6" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>为YaH3C贡献插件</h3>

<p>你可以参考<code>~/.yah3c/plugins/plugin_template.py</code>文件，了解如何为YaH3C编写插件，更详细的信息可以参考<a href="https://github.com/humiaozuzu/YaH3C/wiki/4.-YaH3C%E6%8F%92%E4%BB%B6%E6%9C%BA%E5%88%B6">wiki</a></p>

<h2>
<a id="screenshots" class="anchor" href="#screenshots" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>ScreenShots</h2>

<p>认证成功:</p>

<p><img src="https://github.com/humiaozuzu/YaH3C/blob/master/screenshots/success.png?raw=true" alt="success"></p>

<p>认证失败:</p>

<p><img src="https://github.com/humiaozuzu/YaH3C/raw/master/screenshots/failure.png" alt="failure"></p>

<h2>
<a id="updates" class="anchor" href="#updates" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Updates</h2>

<p>Ver 0.3</p>

<ul>
<li>add eap-md5 support</li>
</ul>

<p>Ver 0.2</p>

<ul>
<li>complete refactory </li>
<li>plugins support</li>
</ul>

<p>Ver 0.01</p>

<ul>
<li>Initial commit</li>
</ul>

<h2>
<a id="todo" class="anchor" href="#todo" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Todo</h2>

<ul>
<li>Command line argument support</li>
<li>Web UI</li>
<li>Tray icon</li>
</ul>

<h2>
<a id="thanks" class="anchor" href="#thanks" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Thanks</h2>

<ul>
<li>
<a href="https://github.com/qiao">qiao</a> - Write python installation script for YaH3C.</li>
<li>
<a href="https://github.com/houqp">houqp</a> - Refered to houqp's <a href="https://github.com/houqp/pyh3c">pyh3c</a>.</li>
<li>
<a href="https://github.com/tigersoldier">tigersoldier</a> - Write EAP-Md5 for YaH3C.</li>
</ul>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/lishpei/YaH3C">Yah3c</a> is maintained by <a href="https://github.com/lishpei">lishpei</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
